<div class="flex items-center gap-2 flex-nowrap">
    <input type="color"
           id="id_{{ widget.name }}_picker"
           value="{% if widget.value %}{{ widget.value }}{% else %}#FFFFFF{% endif %}"
           class="color-picker-input"
           onchange="var txt = document.getElementById('id_{{ widget.name }}'); if(txt) { txt.value = this.value; txt.dispatchEvent(new Event('input', {bubbles: true})); txt.dispatchEvent(new Event('change', {bubbles: true})); }">
    <input type="text"
           name="{{ widget.name }}"
           id="id_{{ widget.name }}"
           value="{% if widget.value %}{{ widget.value }}{% endif %}"
           placeholder="#FFFFFF"
           class="color-text-input"
           style="width: 100px; padding: 6px 8px; border: 1px solid var(--color-border-primary, #d1d5db); border-radius: 6px; font-family: ui-monospace, monospace; font-size: 0.875rem; background: var(--color-bg-primary, white); color: var(--color-text-primary, #111827);"
           oninput="var picker = document.getElementById('id_{{ widget.name }}_picker'); if(picker && /^#[0-9A-Fa-f]{6}$/i.test(this.value)) picker.value = this.value;">
</div>
